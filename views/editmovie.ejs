	<!--A Design by W3layouts
	Author: W3layout
	Author URL: http://w3layouts.com
	License: Creative Commons Attribution 3.0 Unported
	License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<head>
	<title>Admin</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link href="/css/style.css" rel="stylesheet" type="text/css" media="all"/>
	<link href="/css/slider.css" rel="stylesheet" type="text/css" media="all"/>
	<link href="/css/form_style.css" rel="stylesheet" type="text/css" media="all"/>
	<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script> 
	<script type="text/javascript" src="/js/move-top.js"></script>
	<script type="text/javascript" src="/js/easing.js"></script>
	<script type="text/javascript" src="/js/jquery.nivo.slider.js"></script>
	<script type="text/javascript" src="/js/jquery.lightbox_me.js"></script>
</head>
<body>
	<div class="header">
		<div class="headertop_desc">
			<div class="wrap">
				<div class="nav_list">
					<ul>
						<li style="float:left;"><a href="/">Home</a></li>
						<li><a href="/createmember?nocache=1">Create Member    </a></li>
						  <li><a href="/listmember?nocache=1">List Members   </a></li>
						  <li><a href="/createmovie?nocache=1">Create Video   </a></li>
						  <li><a href="/listmovie?nocache=1">List Videos   </a></li>	
						  <li><a id="issueMovieLinkId">Issue Videos   </a></li>
						  <li><a id="submitMovieLinkId">Return Videos  </a></li>  
						  <li><a href="/generatebill?nocache=1">Generate Bill  </a></li>
						  <li style="float:right"><a href="/sign-out?nocache=1">Logout</a></li>
					</ul>
				</div>
				<div class="clear"></div>
			</div>
		</div>
		<div class="wrap">
			<script type="text/javascript">
			
			function allnumeric(inputtxt)  
			   {  
				 
				 var numbers = /^[0-9]+$/;  
				 if(inputtxt.match(numbers))  
				 {  
				  return true;  
				 }  
				 else  
				 {
				  return false;  
				 }  
			   }
			   
			

				function validateIssueMovie()   
			   {
			     if(document.issuemovie.membershipNo.value ==null ||document.issuemovie.membershipNo.value == ''){
						alert('Membership No. cannot be blank');
						return false;
					} 
				else if(!allnumeric(document.issuemovie.membershipNo.value))
				{
					alert("Membership No. should be numeric");
					return false;
				}
				else if(document.issuemovie.membershipNo.value.length != 9 ) 
				{
					alert("Membership No. should be 9 Digits.");
					return false;
				}
				else
				{
					
					return true;
				}
			    }
				
				function validateReturnMovie()   
				   {
				     if(document.returnmovie.membershipNo.value ==null ||document.returnmovie.membershipNo.value == ''){
							alert('Membership No. cannot be blank');
							return false;
						} 
					else if(!allnumeric(document.returnmovie.membershipNo.value))
					{
						alert("Membership No. should be numeric");
						return false;
					}
					else if(document.returnmovie.membershipNo.value.length != 9 ) 
					{
						alert("Membership No. should be 9 Digits.");
						return false;
					}
					else
					{
						
						return true;
					}
				    }
				
			
			   function decimalNumbers(inputtxt)  
			   {  
				 
				 var numbers = /^[0-9]+\.[0-9]+$/;
				 var numbers1 = /^[0-9]+$/;
				 if(inputtxt.match(numbers) || inputtxt.match(numbers1)) 
				 {  
				  return true;  
				 }  
				 else  
				 {
				  return false;  
				 }  
			   }


				function validateCreateMovie(createmovie)   
			   {
			     var error = "";
			     return true;
			     if(createmovie.mname.value==null ||createmovie.mname.value == ''){
			     		error += 'Video Name field cannot be blank<br/>';
					
					} 
			     
			     if(createmovie.poster.value==null ||createmovie.poster.value == ''){
			     		error += 'Image field cannot be blank<br/>';
					
					} 
					if(createmovie.banner.value==null ||createmovie.banner.value == ''){
						error += 'Banner cannot be blank<br/>';
					}
					if(createmovie.releasedate.value==null ||createmovie.releasedate.value == ''){
						error += 'Release Year cannot be blank<br/>';
					} else if(!allnumeric(createmovie.releasedate.value)){
						error += 'Enter valid number for Release Year<br/>';
					} else if(createmovie.releasedate.value.length != 4){
						error += 'Enter valid Release Year<br/>';
					}
					if(createmovie.category.value==null ||createmovie.category.value == ''){
						error += 'Category cannot be blank<br/>';
					}
					if(createmovie.rentamount.value==null ||createmovie.rentamount.value == ''){
						error += 'Rent Amount cannot be blank<br/>';
					}else if(!decimalNumbers(createmovie.rentamount.value)){
						error += 'Enter valid number for Rent amount<br/>';
					}
					if(createmovie.copies.value==null ||createmovie.copies.value == ''){
						error += 'Number of Copies cannot be blank<br/>';
					}else if(!allnumeric(createmovie.copies.value)){
						error += 'Enter valid number for Number of copies<br/>';
					}
					
					if(error != "") {
						document.getElementById("error").innerHTML = error;
						return false;
					}
			    }
			
			
			$('#issueMovieLinkId').click(function(e) {
				$('#issueMoviePopup').lightbox_me({
					centered: true,preventScroll: true
				});
				e.preventDefault();
			});

			$('#submitMovieLinkId').click(function(e) {
				$('#submitMoviePopup').lightbox_me({
					centered: true,preventScroll: true
				});
				e.preventDefault();
			});

			function DropDown(el) {
				this.dd = el;
				this.initEvents();
			}
			DropDown.prototype = {
				initEvents : function() {
					var obj = this;

					obj.dd.on('click', function(event){
						$(this).toggleClass('active');
						event.stopPropagation();
					});	
				}
			}

			$(function() {

				var dd = new DropDown( $('#dd') );

				$(document).click(function() {
											// all dropdowns
											$('.wrapper-dropdown-2').removeClass('active');
										});

			});
			</script>    
			<div class="header_bottom">
				<div class="header_bottom_left">										
				</div>

			</div>
		</div>
	</div>
	<!------------End Header ------------>
	<!------------Popoups ------------>
	<div id="issueMoviePopup" style="display:none;background:grey">

		<h1 align="center" style="font-size:25px;font-weight:bold">Issue Videos </h1>
		<form style="margin-top: 13px;" action="/issuemovie-submit" method="Post" name ="issuemovie" onsubmit="return validateIssueMovie()">
			<div class="fieldBlock">
				<input id="membershipNoIM" class="singleTextBox" placeholder="Membership No." maxlength="75" name="membershipNo" type="text"/>
			</div>
			<br/>
			<div class="fieldBlock" align="center">
				<input name="Submit" class="submitButtonClass" type="submit" value="Next>>" />
			</div>			
		</form>
	</div>

	<div id="submitMoviePopup" style="display:none;background:grey">
		<h1 align="center" style="font-size:25px;font-weight:bold">Return Videos </h1>
		<form style="margin-top: 13px;" action="/submitmovie-submit" method="POST" name="returnmovie" onsubmit="return validateReturnMovie()">
			<div class="fieldBlock">
				<input id="membershipNoSM" class="singleTextBox" placeholder="Membership No." maxlength="75" name="membershipNo" type="text"/>
			</div>
		</br>
		<div class="fieldBlock" align="center">
			<input name="Submit" class="submitButtonClass" type="submit" value="Next>>" />
		</div>			
	</form>
</div>

<!------------End Popups ------------>
	<div class="main">
		<div class="wrap">
			<div class="content">
				<div class="content_top">
					<div class="heading">
						<div class="header_bottom_center">

							<div class="clear"></div>
						</div>

						<h3>Add a Video</h3>
					</div>
				</div>
				<div class="section group">
					<form method="POST" id="createmovie" action="/editmovie-submit" onsubmit="return validateCreateMovie(this)">
					<input type="hidden" name="movieId" value="<%=movie.id%>"/>
						<div style="color:orange; font-weight:bold;" align="center">
							<% if(editedresults != null) {%>
							<%= editedresults %>
							<% } %>
						</div>
						<div class="container">
							<header>
								<h1 align="center">Edit a Video Listing</h1>
							</header>
							<div class="fieldBlock">
								<input id="title" class="singleTextBox" placeholder="Video Name" maxlength="100" name="title" value="<%=movie.title%>" type="text" /></input>
							</div>
							<div class="fieldBlock">
								<select class="doubleTextBox" id="videoTypeId" name="videoTypeId" style="width:300px;">
									<option value="">Video Type</option>
									<% for(var i in videoTypes) { 
										if(movie.video_type_id == videoTypes[i]["id"]) {
									%>
										<option value="<%= videoTypes[i]['id'] %>" selected><%=videoTypes[i]["name"]%></option>
										<%	} else {
										%>
										<option value="<%= videoTypes[i]['id'] %>"><%=videoTypes[i]["name"]%></option>
									<% } } %>
								</select>
								<input class="doubleTextBox" placeholder="Rental Rate" id="rentalRate" maxlength="25" name="rentalRate" value="<%=movie.rental_rate%>" type="text"></input>
							</div>
							<div class="fieldBlock">
								<input id="poster" class="singleTextBox" placeholder="Poster" maxlength="45" name="poster" value="<%=movie.poster%>"></input>
							</div>

							<div class="fieldBlock">
								<input id="description" class="singleTextBox" placeholder="Description" maxlength="45" value="<%=movie.description%>" name="description"></input>
							</div>

							<div class="fieldBlock">
								<input id="releaseYear" class="doubleTextBox" placeholder="Release Year" value="<%=movie.release_year%>" name="releaseYear" type="text"/>
								<input id="length" class="doubleTextBox" placeholder="Video Length (in minutes)" value="<%=movie.length%>" name="length" type="text"/>
							</div>

							<div class="fieldBlock">
								<input id="replacementCost" class="doubleTextBox" placeholder="Replacement Cost" value="<%=movie.replacement_cost%>" name="replacementCost" type="text"/>
								<input id="discount" class="doubleTextBox" value="<%=movie.discount%>" placeholder="Discount" name="discount" type="text"/>
							</div>

							<div class="fieldBlock">
								<select id="formatId" name="formatId" style="width:300px;"class="doubleTextBox">
									<% for(var i in formats) { 
										if(movie.format_id == formats[i]["id"]) {
											%>
											<option value="<%= formats[i]['id'] %>" selected><%=formats[i]["name"]%></option>
											<%	} else {
												%>
												<option value="<%= formats[i]['id'] %>"><%=formats[i]["name"]%></option>
												<% 
											}} %>
										</select>

										<select id ="categoryIds" name="categoryIds" style="width:300px;"class="doubleTextBox" multiple>
											<% for(var i in categories) {
												if(movie.categoryIds.indexOf(categories[i]["id"]) != -1) {
													%>
													<option value="<%= categories[i]['id'] %>" selected><%=categories[i]["name"]%></option>
													<% } else { %>
													<option value="<%=categories[i]['id']%>"><%=categories[i]["name"]%></option>

													<% }} %>
												</select>
											</div>

											<div class="fieldBlock">
												<select id="languageId" name="languageId" style="width:300px;"class="doubleTextBox">
													<% for(var i in languages) { 
														if(movie.language_id == languages[i]["id"]) {
															%>
															<option value="<%= languages[i]['id']%>" selected><%=languages[i]["name"]%></option>
															<%	} else {
																%>
																<option value="<%= languages[i]['id'] %>"><%=languages[i]["name"]%></option>
																<% }} %>
															</select>

															<select id ="originalLanguageId" name="originalLanguageId" style="width:300px;"class="doubleTextBox">
																<% for(var i in languages) { 
																	if(movie.original_language_id == languages[i]["id"]) {
																		%>
																		<option value="<%= languages[i]['id'] %>" selected><%=languages[i]["name"]%></option>
																		<% }} %>
																	</select>
																</div>
																<div class="fieldBlock">
																	<select id="actorIds" name="actorIds" style="width:300px;"class="doubleTextBox" multiple>
																		<% for(var i in actors) { 
																			if(movie.actorIds.indexOf(actors[i]["id"]) != -1) {
																			%>	<option value="<%= actors[i]['id'] %>" selected><%=actors[i]["first_name"]%> <%=actors[i]["last_name"]%></option>
																			<% } else { %>
																			<option value="<%= actors[i]['id'] %>"><%=actors[i]["first_name"]%> <%=actors[i]["last_name"]%></option>
																		<% } } %>
																	</select>

																	<select id ="certificationId" name="certificationId" style="width:300px;"class="doubleTextBox" multiple>
																		<% for(var i in certificates) { 
																			if(movie.certification_id == certificates[i]["id"]) {
																		%>
																			<option value="<%= certificates[i]['id'] %>" selected><%=certificates[i]["name"]%></option>
																			<%	} else {
																			%>
																			<option value="<%= certificates[i]['id'] %>"><%=certificates[i]["name"]%></option>
																		<% } } %>
																	</select>
																</div>

																<div class="fieldBlock">
																	<input class="doubleTextBox" placeholder="Rating" id="rating"  value="<%=movie.rating%>" maxlength="5" name="rating" type="text"></input>
																	<input class="tripleTextBox" style="width:140px" placeholder="Number of Copies:" id="availableCopies" maxlength="5"  value="<%=movie.available_copies%>" name="availableCopies" type="text"></input>
																</div>

																<div class="fieldBlock" align="center">
																	<input name="Submit" align="center" class="loginButton singleTextBox" type="submit" value="Submit" />
																</div>

															</div>
														</form>
													</div>
												</div>
											</div>
										</div>

										<script type="text/javascript">
										$(document).ready(function() {			
											$().UItoTop({ easingType: 'easeOutQuart' });

										});
										</script>
										<a href="#" id="toTop"><span id="`"> </span></a>
									</body>
									</html>

