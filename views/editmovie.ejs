<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


</style>
<title>Video Library</title>

<link href="/stylesheets/templatemo_style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">

   function allnumeric(inputtxt)  
   {  
	 
	 var numbers = /^[0-9]+$/;  
	 if(inputtxt.match(numbers))  
	 {  
	  return true;  
	 }  
	 else  
	 {
	  return false;  
	 }  
   }
   
   function decimalNumbers(inputtxt)  
   {  
	 
	 var numbers = /^[0-9]+\.[0-9]+$/;
	 var numbers1 = /^[0-9]+$/;
	 if(inputtxt.match(numbers) || inputtxt.match(numbers1)) 
	 {  
	  return true;  
	 }  
	 else  
	 {
	  return false;  
	 }  
   }


	function validateCreateMovie(createmovie)   
   {
     var error = "";
     return true;
     if(createmovie.mname.value==null ||createmovie.mname.value == ''){
     		error += 'Movie Name field cannot be blank<br/>';
		
		} 
		if(createmovie.banner.value==null ||createmovie.banner.value == ''){
			error += 'Banner cannot be blank<br/>';
		}
		if(createmovie.releasedate.value==null ||createmovie.releasedate.value == ''){
			error += 'Release Year cannot be blank<br/>';
		} else if(!allnumeric(createmovie.releasedate.value)){
			error += 'Enter valid number for Release Year<br/>';
		} else if(createmovie.releasedate.value.length != 4){
			error += 'Enter valid Release Year<br/>';
		}
		if(createmovie.category.value==null ||createmovie.category.value == ''){
			error += 'Category cannot be blank<br/>';
		}
		if(createmovie.rentamount.value==null ||createmovie.rentamount.value == ''){
			error += 'Rent Amount cannot be blank<br/>';
		}else if(!decimalNumbers(createmovie.rentamount.value)){
			error += 'Enter valid number for Rent amount<br/>';
		}
		if(createmovie.copies.value==null ||createmovie.copies.value == ''){
			error += 'Number of Copies cannot be blank<br/>';
		}else if(!allnumeric(createmovie.copies.value)){
			error += 'Enter valid number for Number of copies<br/>';
		}
		
		if(error != "") {
			document.getElementById("error").innerHTML = error;
			return false;
		}
    }
</script>

</head>

<body>
	<div id="templatemo_background_section_top">
    
    	<div class="templatemo_container">
		
        	<div id="templatemo_header">
				<div id="templatemo_logo_section">            
		        	<h1><a href="/">Video Library</a></h1>               
					<h2>Store for all movies: Comedy, Thriller, Action, Romantic, Documentary</h2>
				</div>
				<div id="templatemo_user_section">            
		        	Welcome <%= userDet.firstname %>!!
		        	<a href="/sign-out?nocache=1">Sign Out</a>
				</div>
         	</div><!-- end of headder -->
               <div id="templatemo_menu_panel"> 
				<div id="templatemo_menu_section">
					
						<ul>
						  <li><a href="/createmember?nocache=1">Create member    </a></li>
						  <li><a href="/listmember?nocache=1">List Members   </a></li>
						  <li><a href="/createmovie?nocache=1">Create Movie   </a></li>
						  <li><a href="/listmovie?nocache=1">List Movies   </a></li>
						  <li><a href="/issuemovie?nocache=1">Issue Movie   </a></li>
						  <li><a href="/submitmovie?nocache=1">Submit Movie  </a></li>  
						  <li><a href="/generatebill?nocache=1">Generate Bill  </a></li> 
							
						</ul> 
						
					</div>
             </div> <!-- end of menu -->
		</div><!-- end of container-->
        
	</div><!-- end of templatemo_background_section_top-->
    
    <div id="templatemo_background_section_middle">
    
    	<div class="templatemo_container">
        
        	<div id="templatemo_left_section">
            	
                <div class="templatemo_post">
                
                	<div class="templatemo_post_top">
                    	<h1>Edit Movie</h1>
                    </div>
                    <div class="templatemo_post_mid">
                    
                      <h3 id="error" style="color:yellow;"></h3>
                  
                    	<form method="POST" id="createmovie" action="/editmovie-submit" onsubmit="return validateCreateMovie(this)">
                    	<div style="color:yellow; font-weight:bold;" align="center">
				<% if(editedresults != null) {%>
				<%= editedresults %>
				<% } %>
				</div>
				<br/>
                    	<table border="0">
							<tbody>
							
							<tr>
							<td><label for="title">Title*: </label> </td>
							<td><input id="title" maxlength="100" name="title" type="text" value="<%=movie.title%>"/> </td>
							</tr>
							
							<tr>
							<td><label for="description">Description: </label> </td>
							<td><input id="description" maxlength="45" name="description" type="text" value="<%=movie.description%>"/> </td>
							</tr>
							
							<tr>
							<td><label for="releaseYear">Release Year: </label> </td>
							<td><input id="releaseYear" name="releaseYear" type="text" value="<%=movie.release_year%>"/></td>
							</tr>
							
							<tr>
							<td><label for="rentalRate">Rental Rate: </label> </td>
							<td><input id="rentalRate" name="rentalRate" type="text" value="<%=movie.rental_rate%>"/></td>
							</tr>
							
							<tr>
							<td><label for="discount">Discount: </label> </td>
							<td><input id="discount" name="discount" type="text" value="<%=movie.discount%>"/></td>
							</tr>


							<tr>
							<td><label for="availableCopies">Available Copies: </label> </td>
							<td><input id="availableCopies" maxlength="5" name="availableCopies" type="text" style="width:40px" value="<%=movie.available_copies%>"/> </td>
							</tr>
							
							<tr>
							<td><label for="formatId">Format: </label> </td>
							<td>
							
							<select id ="formatId" name="formatId">
							<option value="">Select</option>
							<% for(var i in formats) { 
								if(movie.format_id == formats[i]["id"]) {
							%>
								<option value="<%= formats[i]['id'] %>" selected><%=formats[i]["name"]%></option>
								<%	} else {
								%>
								<option value="<%= formats[i]['id'] %>"><%=formats[i]["name"]%></option>
							<% } } %>
							</select>
							
							 </td>
							</tr>
							
							<tr>
							<td><label for="languageId">Language: </label> </td>
							<td>
							
							<select id ="languageId" name="languageId">
							<option value="">Select</option>
							<% for(var i in languages) { 
								if(movie.language_id == languages[i]["id"]) {
							%>
								<option value="<%= languages[i]['id'] %>" selected><%=languages[i]["name"]%></option>
								<%	} else {
								%>
								<option value="<%= languages[i]['id'] %>"><%=languages[i]["name"]%></option>
							<% } } %>
							</select>
							
							 </td>
							</tr>
							
							<tr>
							<td><label for="originalLanguageId">Original Language: </label> </td>
							<td>
							
							<select id ="originalLanguageId" name="originalLanguageId">
							<option value="">Select</option>
							<% for(var i in languages) { 
								if(movie.original_language_id == languages[i]["id"]) {
							%>
								<option value="<%= languages[i]['id'] %>" selected><%=languages[i]["name"]%></option>
								<%	} else {
								%>
								<option value="<%= languages[i]['id'] %>"><%=languages[i]["name"]%></option>
							<% } } %>
							</select>
							
							 </td>
							</tr>
							
							
							<tr>
							<td><label for="length">Length: </label> </td>
							<td><input id="length" maxlength="5" name="length" type="text" style="width:40px" value="<%=movie.length%>"/> </td>
							</tr>
							
							<tr>
							<td><label for="replacementCost">Replacement Cost: </label> </td>
							<td><input id="replacementCost" maxlength="5" name="replacementCost" type="text" style="width:40px" value="<%=movie.replacement_cost%>"/> </td>
							</tr>
							
							
							<tr>
							<td><label for="rating">Rating: </label> </td>
							<td>
							<input id="rating" maxlength="5" name="rating" type="text" style="width:40px" value="<%=movie.rating%>"/>
							
							 </td>
							</tr>
							
							<tr>
							<td><label for="certificationId">Certification: </label> </td>
							<td>
							
							<select id ="certificationId" name="certificationId">
							<option value="">Select</option>
							<% for(var i in certificates) { 
								if(movie.certification_id == certificates[i]["id"]) {
							%>
								<option value="<%= certificates[i]['id'] %>" selected><%=certificates[i]["name"]%></option>
								<%	} else {
								%>
								<option value="<%= certificates[i]['id'] %>"><%=certificates[i]["name"]%></option>
							<% } } %>
							</select>
							
							 </td>
							</tr>
							
							<tr>
							<td><label for="videoTypeId">Video Type: </label> </td>
							<td>
							
							<select id ="videoTypeId" name="videoTypeId">
							<option value="">Select</option>
							<% for(var i in certificates) { 
								if(movie.video_type_id == videoTypes[i]["id"]) {
							%>
								<option value="<%= videoTypes[i]['id'] %>" selected><%=videoTypes[i]["name"]%></option>
								<%	} else {
								%>
								<option value="<%= videoTypes[i]['id'] %>"><%=videoTypes[i]["name"]%></option>
							<% } } %>
							</select>
							
							 </td>
							</tr>
							
							<tr>
							<td><label for="actorIds">Actors: </label> </td>
							<td><!--<input id="category" maxlength="75" name="category" type="text" />-->
							
							<select id ="actorIds" name="actorIds" multiple>
							<% for(var i in actors) { 
								if(movie.actorIds.indexOf(actors[i]["id"]) != -1) {
								%>	<option value="<%= actors[i]['id'] %>" selected><%=actors[i]["first_name"]%> <%=actors[i]["last_name"]%></option>
								<% } else { %>
								<option value="<%= actors[i]['id'] %>"><%=actors[i]["first_name"]%> <%=actors[i]["last_name"]%></option>
							<% } } %>
							</select>
							
							 </td>
							</tr>
							
							
							<tr>
							<td><label for="categoryIds">Categories: </label> </td>
							<td><!--<input id="category" maxlength="75" name="category" type="text" />-->
							
							<select id ="categoryIds" name="categoryIds" multiple>
							<% for(var i in categories) { 
								if(movie.categoryIds.indexOf(categories[i]["id"]) != -1) {
								%>	<option value="<%=categories[i]['id']%>" selected><%=categories[i]["name"]%></option>
								<% } else { %>
								<option value="<%=categories[i]['id']%>"><%=categories[i]["name"]%></option>
							<% } } %>
							</select>
							
							 </td>
							</tr>
						
							
							<tr><td></td>
							</tr>
							<tr>
							<td align="right"><input name="Submit" type="submit" value="Submit" /></td>
							</tr>
				
							</tbody></table>
                			<input type="hidden" name="movieId" value="<%=movie.id%>"/>
                           </form>
                          
                           
                                           
                    </div>
                    <div class="templatemo_post_bottom">
                    
                    
                    </div>
                    
				</div><!-- end of templatemo_post-->
                
            </div><!-- end of left section-->
            
            
        </div><!-- end of container-->
	</div><!-- end of background middle-->
    
     
</body>

</html>